<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-124600152-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'UA-124600152-1');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="../../style_index_page.css">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <title>Rodolfo Lourenzutti</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarText"
            aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="" data-page="index.html"><i class="fas fa-home"></i>
                        Home
                        <span class="sr-only" id="nav-link-current">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="" data-page="blog/blog_index.html"><i class="fas fa-pencil-alt"></i> Blog
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="" data-page="tutorials/tutorials_index.html"><i class="fas fa-book"></i>
                        Tutorials </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="" data-page='teaching.html'><i class="fas fa-chalkboard-teacher"></i>
                        Teaching</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="" data-page='about.html'><i class="fas fa-info-circle"></i> About </a>
                </li>
            </ul>
        </div>
    </nav>
    <div class="container">
        <section id="title_menu">
            <img id="profile_img" src="https://github.com/Lourenzutti.png" alt="">
            <p id="title">Rodolfo Lourenzutti</p>
            <p id="subtitle">Teaching Fellow @ UBC Master of Data Science</p>

            <hr class="title_separator">

            <ul id="menu">
                <li>
                    <a class="menu_link" href="" data-page="index.html"> <i class="fas fa-home"></i> Home </a>
                </li>
                <li>
                    <a class="menu_link" href="" data-page="blog/blog_index.html"> <i class="fas fa-pencil-alt"></i>
                        Blog </a>
                </li>
                <li>
                    <a class="menu_link" href="" data-page="tutorials/tutorials_index.html"> <i class="fas fa-book"></i>
                        Tutorials
                    </a>
                </li>
                <li>
                    <a class="menu_link" href="" data-page="teaching.html"><i class="fas fa-chalkboard-teacher"></i>
                        Teaching</a>
                </li>
                <li>
                    <a class="menu_link" href="" data-page="about.html"><i class="fas fa-info-circle"></i> About </a>
                </li>
            </ul>

            <hr class="title_separator">

            <div class="social">

                <div class="social_link">
                    <a class="social_link" href="https://github.com/Lourenzutti" target="_blank">
                        <i class="fab fa-github fa-2x"></i>
                    </a>
                </div>

                <div class="social_link" style="color: lightskyblue">
                    <a class="social_link" href="https://twitter.com/LourenzuttiR" target="_blank">
                        <i class="fab fa-twitter fa-2x"></i>
                    </a>
                </div>

                <div class="social_link" style="color: rgb(63, 63, 185);">
                    <a class="social_link" href="https://www.linkedin.com/in/rodolfo-lourenzutti/" target="_blank">
                        <i class="fab fa-linkedin fa-2x"></i>
                    </a>
                </div>

                <div class="social_link">
                    <i class="far fa-envelope fa-2x"></i>
                </div>
            </div>
        </section>

        <section id="main_column">
            <div class="section_title">
                Sampling distribution
                <hr class="main_separator">
            </div>
            <div class="text">
                <p>
                    This year (2020) there will be a presidential election year in the United States.
                    Every election year we see a bunch of surveys trying to draw a picture on how
                    people are going to vote. But how do they make these surveys?
                    Some of these surveys are quite accurate, other not so much. According to this
                    <a href="https://www2.census.gov/programs-surveys/demo/tables/voting/table01.xlsx">table </a>
                    from <a href="https://www.census.gov/en.html">US Census Bureau</a> there are approximately
                    233.5 million voting-age citizen. Do these pools check how all the people are going to vote?
                    No! It would certainly require a lot of resources, including time. The political scenario changes
                    quite fast. Even if you had the resources to to ask everyone, by the time you are finished, many
                    political events happened to which would change people's opinions. So, we need a strategy that
                    can tell us approximately how voters are going to vote without asking every voter. So, how many
                    voters
                    should we ask (sample size)?
                    But how is this possible? Also, what do I mean by approximately?
                    We see that some of these pools are accurate and other are quite wrong. We will see that,
                    even the surveys with bad results are bounded to occur occasionaly, and this is antecipated.
                    Which bring us another question: what do I mean by occasionaly? How frequent is that?

                    Bookkeeping:
                    <ul>
                        <li>What should be our sample size?</li>
                        <li>What do we mean by approximately?</li>
                        <li>What do we mean by occasionaly?</li>
                    </ul>

                    Statistical inference is the area of statistics that is focused on the extrapolation
                    of results observed in a sample of the population to the whole population. It helps us to
                    answer the questions above by measuring the intrinsic uncertainty and errors caused by the
                    use of a sample of items/people instead of the whole population. One of the core concepts of
                    statistical inference is <emph>Sampling Distributions</emph>, which will discuss in this post.
                    But first, let's discuss what is a population and what is a sample more precisely.
                </p>

                <h3>
                    1. Population
                </h3>
                <p>
                    By population we mean the group of all items/people that we are interested in. In general,
                    we are interest in one or more parameters of the population. Let's see a few examples.
                </p>

                <p>
                    <em><strong>Example 1.1:</strong></em> In the election example above, the group of all American
                    voters
                    is our population.
                    We are interested in the proportion of voters that will vote for each candidate.
                    (Note that the population is not the group of all Americans. It is the group of American
                    voters.)
                </p>
                <p>
                    <em><strong>Example 1.2:</strong></em>
                    Apple buys touchscreen from Samsung. Suppose that Apple only accepts a batch of screens, if average
                    lifespan of the screens in the batch
                    is above 24 months. THere's a way an accelerated way to check this, but once the screen fails it is
                    useless. Obviously, Apple cannot measure
                    all the screens in the batch, otherwise there will be nothing left for their phones. In this case,
                    the population is the batch of screens,
                    and the variable of interest is the average lifespan of the screens in months.
                </p>
                <h5>
                    Exercise 1.1
                </h5>
                <p>
                    In times of Covid-19, the Canadian government started providing some aid to Canadian workers that
                    lost their jobs. The provincial
                    government of British Columbia (BC) is studying if it should also provide some aid to university
                    students. To make the decision,
                    BC's government wants to know the average income of university students in the province.
                </p>
                <form>
                    What is the population?<br>
                    <input type="text" size="35%" /><br>
                    What is the variable of interest?<br>
                    <input type="text" size="35%">
                </form>
                <br>
                <button id="Exercise1.1">Show answers</button>
                <br>
                <br>
                <p>
                    As discussed before, in many cases we are not able to measure the variable of interest in the entire
                    population.
                    We only do it for a sample of the population. Let's define sample.
                </p>
                <h3>
                    2. Sample
                </h3>
                <p>We are going to call <em>sample</em> any subset (sub-group of elements) of the population. What we
                    hope for is that this subset
                    would represent the population well, but this is not always the case. Even if the population is
                    poorly represented by a sub-group of
                    elements, such sub-group is still called a sample of the population.</p>

                <p>There are many different strategies to draw a sample.
                    One of the most important is called <em>random sampling</em> (or sampling with
                    replacement).
                    To take a random sample of <em>n</em> elements from a population you must:
                    <ol>
                        <li> List all the elements of the population.</li>
                        <li> Select one element at random from the population. All elements must have the same
                            probability of being selected.</li>
                        <li> Save the selected element and put it back in the population.</li>
                        <li> Repeat Steps 2. and 3. <em>n</em> times.</li>
                    </ol>
                    Random sampling is very mathematically convenient. However, in many cases it is not the best
                    strategy you could use. But let's not worry about this now.
                </p>
                &lt ADD IMAGE HERE &gt
                <p>
                    Now that we have the concept of sample, we can revisit the concept of population.
                    As it was mentioned, a sample is a subset of the population. But frequently
                    the population that the sample is drawn from is not the same population we are interested
                    in. Let me try to give an example.
                </p>

                <p>
                    <em><strong>Example 2.1:</strong></em>
                    In times of Covid-19, the Canadian government started providing some aid to Canadian workers
                    that lost their jobs. The provincial government of British Columbia (BC) is studying if it
                    should also provide some aid to university students. To make the decision, BC's government
                    wants to know the average income of university students in the province. There are many
                    universities in BC, and sampling students from all universities can be costly and time consuming.
                    The goverment decides to sample students only of the biggest university in the province,
                    which is the University of British Columbia (UBC). By doing this the sample that the goverment will
                    be taking, comes from the population of all UBC students, which is a more restricted group than the
                    group of all university students in BC.
                </p>

                Example 2.1 shows us that we need to improve our definition of population and make a distinction between
                the two populations.

                <p>
                    <ul>
                        <li>
                            <strong>Target Population:</strong> The group of all items/people we are interested in.
                        </li>
                        <li>
                            <strong>Sampled Population:</strong> The group of all items/people that we actually taking
                            our sample from.
                        </li>
                    </ul>
                </p>
                <p>Ideally, the <em>Sampled Population</em> will coincide with the <em>Target Population</em>. If not,
                    be aware that your results based on the sample can only be extrapolated (by means of statistical
                    inference)
                    to the Sampled Population. To extrapolate from the Sample Population to the Targe Population you
                    need a
                    justification beyond statistical inference -- which might be valid, but might also be misleading and
                    wrong.
                    Careful!
                </p>

                <p>
                    It is also worht mentioning that sometimes the target population and sample population differ for
                    reasons other than by choice. This is very common in medical research (see the exercise below).
                </p>
                <h5>
                    Exercise 2.1
                </h5>
                <p>
                    Say that a Canadian pharmaceutical company created a drug for a new disease, say Covid-19. But now,
                    they need
                    to test if the drug works on human beings. The company will administer the drug and a placebo
                    on people infected by Covid-19 and compare the results to see if the drug works.
                </p>
                <form>
                    What is the target population?<br>
                    <input type="text" size="35%" /><br>
                    What is the sampled population?<br>
                    <input type="text" size="35%" /><br>
                </form>
                <p>What the company should do to match the sampled population to the target population? Is this
                    reasonable?
                </p>
                <textarea style="width: 100%; height:150px;"></textarea>
                <br>
                <br>
                <button id="Exercise1.1">Show answers</button>
                <br>
                <br>

                <h3>
                    3. Sampling distribution
                </h3>

                <h4>Example 3.1</h4>
                <h5> Population: </h5>
                <div>
                    <svg width=" 85" height="85" style="display: inline-block;">
                        <rect width="80" height="80" rx="10" fill="#800000" />
                        <circle r="6" cx=40 cy=40 fill="#f2f2f2" />
                    </svg>
                    <svg width="85" height="85">
                        <rect width="80" height="80" rx="10" fill="#800000" />
                        <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                        <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                    </svg>
                    <svg width="85" height="85">
                        <rect width="80" height="80" rx="10" fill="#800000" />
                        <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                        <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                        <circle r="6" cx=40 cy=40 fill="#f2f2f2" />
                    </svg>
                    <svg width="85" height="85">
                        <rect width="80" height="80" rx="10" fill="#800000" />
                        <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                        <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                        <circle r="6" cx=15 cy=65 fill="#f2f2f2" />
                        <circle r="6" cx=65 cy=15 fill="#f2f2f2" />
                    </svg>
                    <svg width="85" height="85">
                        <rect width="80" height="80" rx="10" fill="#800000" />
                        <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                        <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                        <circle r="6" cx=15 cy=65 fill="#f2f2f2" />
                        <circle r="6" cx=65 cy=15 fill="#f2f2f2" />
                        <circle r="6" cx=40 cy=40 fill="#f2f2f2" />
                    </svg>
                    <svg width="85" height="85">
                        <rect width="80" height="80" rx="10" fill="#800000" />
                        <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                        <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                        <circle r="6" cx=15 cy=65 fill="#f2f2f2" />
                        <circle r="6" cx=65 cy=15 fill="#f2f2f2" />
                        <circle r="6" cx=15 cy=40 fill="#f2f2f2" />
                        <circle r="6" cx=65 cy=40 fill="#f2f2f2" />
                    </svg>
                </div>
                <div id='histogrm' style="height: 200px; width: 100%;">
                    <svg id='pop_hist' style="height: 100%; width: 100%;"></svg>
                    <script>
                        const svg = d3.selectAll('#pop_hist')
                        const width = +document.querySelector("#histogrm").clientWidth
                        const height = +document.querySelector("#histogrm").clientHeight
                        const render = data => {
                            const xValue = d => d.element
                            const yValue = d => d.value
                            const margin = { top: 20, right: 20, bottom: 20, left: 30 };
                            const innerWidth = width - margin.left - margin.right;
                            const innerHeight = height - margin.top - margin.bottom;
                            const max = d3.max(data, yValue)
                            console.log(innerWidth)
                            const yScale = d3.scaleLinear()
                                .domain([0, max])
                                .range([innerHeight, 0]);

                            const xScale = d3.scaleBand()
                                .domain(data.map(xValue))
                                .range([0, innerWidth])
                                .padding(0.1);

                            const g = svg.append('g')
                                .attr('transform', `translate(${margin.left}, ${margin.top})`);

                            g.append('g').call(d3.axisBottom(xScale))
                                .attr('transform', `translate(0,${innerHeight})`)
                                .style('font', '15px times');
                            g.append('g').call(d3.axisLeft(yScale).ticks(2));

                            g.selectAll('rect')
                                .data(data)
                                .enter()
                                .append('rect')
                                .attr('x', d => xScale(xValue(d)))
                                .attr('y', d => yScale(d.value))
                                .attr('height', d => yScale(max - yValue(d)))
                                .attr('width', xScale.bandwidth())
                                .attr('fill', 'steelblue');

                        }
                        var values = [
                            { 'element': 1, 'value': 1 },
                            { 'element': 2, 'value': 1 },
                            { 'element': 3, 'value': 1 },
                            { 'element': 4, 'value': 1 },
                            { 'element': 5, 'value': 1 },
                            { 'element': 6, 'value': 1 }
                        ];
                        render(values)

                    </script>
                </div>
                <br>
                <form>
                    Sample size: <input type="number" size="5px"></input> <br><br>
                    Number of samples: <input type="number" size="5px"></input> <br>
                </form>

                <button></button>
                <div class="multi-column-div">
                    <div class="column">
                        <svg width="100%">
                            <rect width="100%" height="100%" rx="10" fill="#800000" />
                        </svg>
                    </div>
                    <div class="column">
                        <svg width="100%">
                            <rect width="100%" height="100%" rx="10" fill="green" />
                        </svg>
                    </div>
                    <div class="column">
                        <svg width="100%">
                            <rect width="100%" height="100%" rx="10" fill="blue" />
                        </svg>
                    </div>
                </div>
                <script>
                    d3
                </script>
                <br><br><br>
                If I only take one, what will be the sampling distribution of the sample mean? <br>

                <svg width="85" height="85">
                    <rect width="80" height="80" rx="10" fill="#800000" />
                    <circle r="6" cx=40 cy=40 fill="#f2f2f2" />
                </svg>
                <svg width="85" height="85">
                    <rect width="80" height="80" rx="10" fill="#800000" />
                    <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                    <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                </svg>
                <svg width="85" height="85">
                    <rect width="80" height="80" rx="10" fill="#800000" />
                    <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                    <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                    <circle r="6" cx=40 cy=40 fill="#f2f2f2" />
                </svg>
                <svg width="85" height="85">
                    <rect width="80" height="80" rx="10" fill="#800000" />
                    <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                    <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                    <circle r="6" cx=15 cy=65 fill="#f2f2f2" />
                    <circle r="6" cx=65 cy=15 fill="#f2f2f2" />
                </svg>
                <svg width="85" height="85">
                    <rect width="80" height="80" rx="10" fill="#800000" />
                    <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                    <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                    <circle r="6" cx=15 cy=65 fill="#f2f2f2" />
                    <circle r="6" cx=65 cy=15 fill="#f2f2f2" />
                    <circle r="6" cx=40 cy=40 fill="#f2f2f2" />
                </svg>
                <svg width="85" height="85">
                    <rect width="80" height="80" rx="10" fill="#800000" />
                    <circle r="6" cx=15 cy=15 fill="#f2f2f2" />
                    <circle r="6" cx=65 cy=65 fill="#f2f2f2" />
                    <circle r="6" cx=15 cy=65 fill="#f2f2f2" />
                    <circle r="6" cx=65 cy=15 fill="#f2f2f2" />
                    <circle r="6" cx=15 cy=40 fill="#f2f2f2" />
                    <circle r="6" cx=65 cy=40 fill="#f2f2f2" />
                </svg>
            </div>
        </section>
    </div>

    <script src="https://kit.fontawesome.com/9ffc1b7c87.js" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <script>
        function load_page(name) {
            const request = new XMLHttpRequest();
            request.open('GET', 'https://lourenzutti.github.io/' + name);
            request.responseType = 'document';
            request.onload = () => {
                const response = request.responseXML;
                document.querySelector('#main_column').innerHTML = response.querySelector('#main_column').innerHTML;
                console.log(request.response.querySelector('#main_column').innerHTML);
            }
            request.send();
        };

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.nav-link').forEach(link => {
                link.onclick = () => {
                    load_page(link.dataset.page);
                    return false;
                };
            });

            document.querySelectorAll('.menu_link').forEach(link => {
                link.onclick = () => {
                    load_page(link.dataset.page);
                    return false;
                };
            });
        });
    </script>

</body>

</html>